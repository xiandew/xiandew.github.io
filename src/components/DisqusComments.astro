---
import { DISQUS_SHORTNAME } from '../consts';

type Props = {
	url: string;
	identifier: string;
};

const { url, identifier } = Astro.props;
---

<div class="disqus-wrap" style="margin-top: 28px;">
	<div id="disqus_thread"></div>
	<script is:inline define:vars={{ url, identifier, shortname: DISQUS_SHORTNAME }}>
		var disqus_config = function () {
			this.page.url = url;
			this.page.identifier = identifier;
		};
		(function () {
			var d = document, s = d.createElement('script');
			s.src = `https://${shortname}.disqus.com/embed.js`;
			s.setAttribute('data-timestamp', String(+new Date()));
			(d.head || d.body).appendChild(s);
		})();
	</script>
	<noscript>
		Please enable JavaScript to view the
		<a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
	</noscript>
</div>
